

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Core module &mdash; Orcs latest documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/logo.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fit module" href="fit_module.html" />
    <link rel="prev" title="Radial Velocity Correction" href="script_example_heliocentric_velocity.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Orcs
          

          
            
            <img src="_static/logo_sidebar.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                lastest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Core module</a></li>
<li class="toctree-l1"><a class="reference internal" href="fit_module.html">Fit module</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_module.html">Process module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils_module.html">Utils module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orcs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Core module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/core_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-orcs.core">
<span id="core-module"></span><h1>Core module<a class="headerlink" href="#module-orcs.core" title="Permalink to this headline">¶</a></h1>
<p>ORCS Core library.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ORCS is built over ORB so that ORB must be installed.</p>
</div>
<dl class="py class">
<dt id="orcs.core.DataFiles">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orcs.core.</span></code><code class="sig-name descname"><span class="pre">DataFiles</span></code><a class="headerlink" href="#orcs.core.DataFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage data files (files in orcs/data)</p>
<dl class="py method">
<dt id="orcs.core.DataFiles.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.DataFiles.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Init class</p>
</dd></dl>

<dl class="py attribute">
<dt id="orcs.core.DataFiles.__weakref__">
<code class="sig-name descname"><span class="pre">__weakref__</span></code><a class="headerlink" href="#orcs.core.DataFiles.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.DataFiles.get_dirname">
<code class="sig-name descname"><span class="pre">get_dirname</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.DataFiles.get_dirname" title="Permalink to this definition">¶</a></dt>
<dd><p>Return absolute data directory path</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.DataFiles.get_path">
<code class="sig-name descname"><span class="pre">get_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.DataFiles.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path to a file in ORCS data folder: orb/data/file_name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> – Name of the file in ORCS data folder.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="orcs.core.LineMaps">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orcs.core.</span></code><code class="sig-name descname"><span class="pre">LineMaps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">orb.core.</span></code></p>
<p>Manage line parameters maps</p>
<dl class="py method">
<dt id="orcs.core.LineMaps.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wavenumber</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">div_nb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wcs_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Init class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimx</strong> – X dimension of the unbinned data</p></li>
<li><p><strong>dimy</strong> – Y dimension of the unbinned data</p></li>
<li><p><strong>lines</strong> – tuple of the line names</p></li>
<li><p><strong>wavenumber</strong> – True if the data is in wavenumber, False if
it is in wavelength.</p></li>
<li><p><strong>binning</strong> – Binning of the data.</p></li>
<li><p><strong>div_nb</strong> – Number of divisions if the data is binned in quadrant mode.</p></li>
<li><p><strong>wcs_header</strong> – (Optional) Unbinned WCS header passed to the written
frames (default None).</p></li>
<li><p><strong>kwargs</strong> – Kwargs are <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> kwargs.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps._get_hdf5_path">
<code class="sig-name descname"><span class="pre">_get_hdf5_path</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps._get_hdf5_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path to the hdf5 bundle</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps._get_map_path">
<code class="sig-name descname"><span class="pre">_get_map_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps._get_map_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path to a map of one gaussian fit parameter for
one given emission line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line_name</strong> – Name of the emission line</p></li>
<li><p><strong>param</strong> – Parameter name</p></li>
<li><p><strong>binning</strong> – (Optional) Binning of the map. If not given
instance binning is used (default None).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps.get_map">
<code class="sig-name descname"><span class="pre">get_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.get_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Get map values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param</strong> – Parameter</p></li>
<li><p><strong>x_range</strong> – (Optional) Data range along X axis (default
None)</p></li>
<li><p><strong>y_range</strong> – (Optional) Data range along Y axis (default
None)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps.get_spectrum">
<code class="sig-name descname"><span class="pre">get_spectrum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cube</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmodel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sinc'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct the fitted vector from the mapped parameters.
:param cube: a SpectralCube instance
:param x: x position in pixels (unbinned)
:param y: y position in pixels (unbinned)
:param fmodel: line model</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save class as an HDF5 file</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps.set_map">
<code class="sig-name descname"><span class="pre">set_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.set_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Set map values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param</strong> – Parameter</p></li>
<li><p><strong>data_map</strong> – Data</p></li>
<li><p><strong>x_range</strong> – (Optional) Data range along X axis (default
None)</p></li>
<li><p><strong>y_range</strong> – (Optional) Data range along Y axis (default
None)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.LineMaps.write_maps">
<code class="sig-name descname"><span class="pre">write_maps</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.LineMaps.write_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Write all maps to disk in fits format.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="orcs.core.SpectralCube">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orcs.core.</span></code><code class="sig-name descname"><span class="pre">SpectralCube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">orb.cube.</span></code></p>
<p>Extension of <code class="xref py py-class docutils literal notranslate"><span class="pre">orb.cube.SpectralCube</span></code></p>
<p>Core class which gives access to an HDF5 cube. The child class
<a class="reference internal" href="process_module.html#orcs.process.SpectralCube" title="orcs.process.SpectralCube"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpectralCube</span></code></a> may be prefered in general
for its broader functionality.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">orb.cube.SpectralCube</span></code></p>
</div>
<dl class="py method">
<dt id="orcs.core.SpectralCube.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cube_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cube_path</strong> – Path to the HDF5 cube.</p></li>
<li><p><strong>kwargs</strong> – Kwargs are <code class="xref py py-meth docutils literal notranslate"><span class="pre">orb.cube.SpectralCube()</span></code> properties.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube._extract_wrapper">
<code class="sig-name descname"><span class="pre">_extract_wrapper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube._extract_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>General wrapper around get_spectrum* methods for backward
compatibility</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube._get_data_prefix">
<code class="sig-name descname"><span class="pre">_get_data_prefix</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube._get_data_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return data prefix</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.extract_integrated_spectrum">
<code class="sig-name descname"><span class="pre">extract_integrated_spectrum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.extract_integrated_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>region</strong> – A ds9-like region file or a list of pixels
having the same format as the list returned by np.nonzero(),
i.e. (x_positions_1d_array, y_positions_1d_array).</p></li>
<li><p><strong>median</strong> – If True, a median is used instead of a mean to
combine spectra. As the resulting spectrum is integrated,
the median value of the combined spectra is then scaled to
the number of integrated pixels.</p></li>
<li><p><strong>mean_flux</strong> – If True, the mean spectrum (ie per pixel
flux) is returned.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the region must not have a size greater than 400x400
pixels. If you really need a larger region, you can split
you region into smaller ones and combines the resulting
spectra.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.extract_spectrum">
<code class="sig-name descname"><span class="pre">extract_spectrum</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.extract_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a spectrum extracted at x, y and integrated
over a circular aperture or radius r.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – x position</p></li>
<li><p><strong>y</strong> – y position</p></li>
<li><p><strong>r</strong> – (Optional) If r &gt; 0, vector is integrated over a
circular aperture of radius r. In this case the number of
pixels is returned as a parameter: pixels</p></li>
<li><p><strong>median</strong> – If True, a median is used instead of a mean to
combine spectra. As the resulting spectrum is integrated,
the median value of the combined spectra is then scaled to
the number of integrated pixels.</p></li>
<li><p><strong>mean_flux</strong> – If True, the mean spectrum (ie per pixel
flux) is returned.</p></li>
<li><p><strong>subtract_spectrum</strong> – Subtract given spectrum. Must be a
vector of the same size as the extracted spectrum.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>axis, spectrum</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.extract_spectrum_bin">
<code class="sig-name descname"><span class="pre">extract_spectrum_bin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.extract_spectrum_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a spectrum extracted at x, y and integrated
over a binned region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – X position of the bottom-left pixel</p></li>
<li><p><strong>y</strong> – Y position of the bottom-left pixel</p></li>
<li><p><strong>b</strong> – Binning. If 1, only the central pixel is extracted</p></li>
<li><p><strong>median</strong> – If True, a median is used instead of a mean to
combine spectra. As the resulting spectrum is integrated,
the median value of the combined spectra is then scaled to
the number of integrated pixels.</p></li>
<li><p><strong>mean_flux</strong> – If True, the mean spectrum (ie per pixel
flux) is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>axis, spectrum</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.extract_spectrum_in_annulus">
<code class="sig-name descname"><span class="pre">extract_spectrum_in_annulus</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.extract_spectrum_in_annulus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a. orb.fft.RealSpectrum extracted at x, y and integrated
over a circular annulus of min radius rmin and max radius rmax.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – x position</p></li>
<li><p><strong>y</strong> – y position</p></li>
<li><p><strong>rmin</strong> – rmin of the annulus</p></li>
<li><p><strong>rmax</strong> – rmax of the annulus</p></li>
<li><p><strong>median</strong> – If True, a median is used instead of a mean to
combine spectra. As the resulting spectrum is integrated,
the median value of the combined spectra is then scaled to
the number of integrated pixels.</p></li>
<li><p><strong>mean_flux</strong> – If True, the mean spectrum (ie per pixel
flux) is returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.get_flux_uncertainty">
<code class="sig-name descname"><span class="pre">get_flux_uncertainty</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.get_flux_uncertainty" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the uncertainty on the flux (1 sigma) of the spectrum in a
given channel in counts/s.</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.get_radial_velocity_correction">
<code class="sig-name descname"><span class="pre">get_radial_velocity_correction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'heliocentric'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.get_radial_velocity_correction" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Return heliocentric or barycentric velocity correction to apply on</dt><dd><p>the observed target in km/s</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> – (Optional) ‘heliocentric’ or ‘barycentric’
(default ‘heliocentric’).</p></li>
<li><p><strong>date</strong> – (Optional) Corrected date for the
observation. Must be a string with the following format
YYYY-MM-DDTHH:MM:SS.S (default None).</p></li>
</ul>
</dd>
</dl>
<p>For m/s precision the returned float should simply be
added. But more care must be taken if a better precision is
needed. Please see
<a class="reference external" href="http://docs.astropy.org/en/stable/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.radial_velocity_correction">http://docs.astropy.org/en/stable/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.radial_velocity_correction</a>
for more informations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(heliocentric or barycentric) velocities.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>This is based on the astropy methods. See</p>
</div>
<p><a class="reference external" href="http://docs.astropy.org/en/stable/coordinates/velocities.html">http://docs.astropy.org/en/stable/coordinates/velocities.html</a>
for more information on how to use the returned quantities.</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.get_spectrum_from_region">
<code class="sig-name descname"><span class="pre">get_spectrum_from_region</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.get_spectrum_from_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around the extract_spectrum_from_region method to apply
flux calibration by default when extracting spectra (the real
data is in counts) when cube is flux calibrated.</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.process_by_pixel">
<code class="sig-name descname"><span class="pre">process_by_pixel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.process_by_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallelize a function taking binned spectra of the cube as
an input. All pixels are gone through unless a mask is passed
which indicates the pixels that must be processed. The typical
results returned are maps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The parallelized function. Must be func(spectrum,
<a href="#id1"><span class="problematic" id="id2">*</span></a>args, kwargs_dict) which returns a dict of floating values
(e.g. {a:1.9, b:5.6, …}) or a 1d array of floats. If it
returns a dict out must be set to dict(), its default
value. If a 1d array of size N is returned, the out param must
be set to a 3d array of shape (cube.dimx, cube.dimy, N). If
supplied, kwargs are passed to the function as the last
argument in a dict object.  Note also that velocity will not
be corrected on the fly at data extraction so that the called
function must handle it.</p></li>
<li><p><strong>args</strong> – List of arguments passed to the
function. arguments can be a function in which case the
function must be f(x,y), x and y being the pixel
coordinates. Note that x and y can also be lists of
coordinates in which case the function must return a list of
data.</p></li>
<li><p><strong>modules</strong> – Modules to import to run the function.</p></li>
<li><p><strong>out</strong> – depends on the returned values of func. See param
func.</p></li>
<li><p><strong>kwargs</strong> – kwargs of the function func. If supplied,
kwargs are passed to the function as the last argument in a
dict object.</p></li>
<li><p><strong>mask</strong> – a 2d array of bool. Ones giving the pixels on
which the function must be applied.</p></li>
<li><p><strong>binning</strong> – On-the-fly data binning.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any argument with a shape equal to the x,y shape of
the cube (or the binned x,y shape) will be mapped, i.e., the
argument passed to the vector function will be the value
corresponding to the position of the extracted
spectrum. (works also for 3d shaped arguments, the 3rd
dimension can have any size)</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.process_by_region">
<code class="sig-name descname"><span class="pre">process_by_region</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depfuncs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.process_by_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallelize a function applied to a list of integrated
regions extracted from the spectral cube.</p>
<p>the function must be defined as func(spectrum_bundle, <a href="#id3"><span class="problematic" id="id4">*</span></a>args)</p>
<p>theta_orig is the mean original incident angle in the integrated region.</p>
</dd></dl>

<dl class="py method">
<dt id="orcs.core.SpectralCube.reproject">
<code class="sig-name descname"><span class="pre">reproject</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orcs.core.SpectralCube.reproject" title="Permalink to this definition">¶</a></dt>
<dd><p>Reproject data cube in a distorsion-less WCS.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The amount of available RAM must be larger than
the cube size on disk.</p>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="fit_module.html" class="btn btn-neutral float-right" title="Fit module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="script_example_heliocentric_velocity.html" class="btn btn-neutral float-left" title="Radial Velocity Correction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Thomas Martin (thomas.martin.1@ulaval.ca).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>