

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; Orcs latest documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/logo.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="getting_started.html" />
    <link rel="prev" title="ORCS Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Orcs
          

          
            
            <img src="_static/logo_sidebar.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                lastest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-few-words-on-orcs">A few words on ORCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-fitting-engine">The fitting engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#models">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="#models-parameters">Models parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l4"><a class="reference internal" href="script_example_velocity_parameter_precision.html">How precise must be the input velocity parameter ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="script_example_fit_region.html">Make a fit over an entire region of the field</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#uncertainties">Uncertainties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#list-of-available-lines">List of available lines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core_module.html">Core module</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_module.html">Process module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils_module.html">Utils module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orcs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#a-few-words-on-orcs" id="id2">A few words on ORCS</a></p></li>
<li><p><a class="reference internal" href="#the-fitting-engine" id="id3">The fitting engine</a></p>
<ul>
<li><p><a class="reference internal" href="#models" id="id4">Models</a></p></li>
<li><p><a class="reference internal" href="#models-parameters" id="id5">Models parameters</a></p></li>
<li><p><a class="reference internal" href="#uncertainties" id="id6">Uncertainties</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#list-of-available-lines" id="id7">List of available lines</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-few-words-on-orcs">
<h2><a class="toc-backref" href="#id2">A few words on ORCS</a><a class="headerlink" href="#a-few-words-on-orcs" title="Permalink to this headline">¶</a></h2>
<p>ORCS is a Python module which gives you the keys to the analysis of
your SITELLE data cube.</p>
<p>It is composed of calibration methods, extracting tools and a powerful
fitting engine specifically designed for interferometric data. When
fitting spectra, both a classical (frequentist) and a Bayesian
paradigm are available.</p>
</div>
<div class="section" id="the-fitting-engine">
<h2><a class="toc-backref" href="#id3">The fitting engine</a><a class="headerlink" href="#the-fitting-engine" title="Permalink to this headline">¶</a></h2>
<div class="section" id="models">
<h3><a class="toc-backref" href="#id4">Models</a><a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h3>
<p>ORCS ftting engine has been built to accept any number of models (even
grid models). Up to now only three models are available (and used by
default). They all are implemented and documented in the orb.fit
module:</p>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">orb.fit.Cm1LinesModel</span></code>: Emission/absorption
lines (sinc convoluted with a Gaussian giving a certain broadening
to the sinc)</p></li>
</ul>
<a class="reference internal image-reference" href="_images/emission-line-params.png"><img alt="_images/emission-line-params.png" class="align-center" src="_images/emission-line-params.png" style="width: 70%;" /></a>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">orb.fit.ContinuumModel</span></code>: Continuum emission (treated as a
polynomial)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">orb.fit.FilterModel</span></code>: Filter</p></li>
</ul>
</div>
<div class="section" id="models-parameters">
<h3><a class="toc-backref" href="#id5">Models parameters</a><a class="headerlink" href="#models-parameters" title="Permalink to this headline">¶</a></h3>
<p>Emission lines and background model parameters are always defined via
keywords which are passed to the fitting functions (see
<a class="reference internal" href="examples.html#examples"><span class="std std-ref">Examples</span></a>).</p>
<p>Each model is based on a given number of core parameters. In the case
of the lines model those parameters are, for each line, its amplitude
(<code class="docutils literal notranslate"><span class="pre">amp</span></code>), FWHM (<code class="docutils literal notranslate"><span class="pre">fwhm</span></code>), position (i.e. its wavenumber of
wavelength, <code class="docutils literal notranslate"><span class="pre">pos</span></code>) and its broadening (<code class="docutils literal notranslate"><span class="pre">sigma</span></code>, only in the case
of a <code class="docutils literal notranslate"><span class="pre">sincgauss</span></code> line shape - this parameter does not apply for pure
<code class="docutils literal notranslate"><span class="pre">gaussian</span></code> or <code class="docutils literal notranslate"><span class="pre">sinc</span></code> line shape).</p>
<p>In the worst case all the core parameters are free. But you can also
decide to fix some of them or make them covarying. By default all the
parameters are free but you can change the definition of each
parameter with the keywords: <code class="docutils literal notranslate"><span class="pre">amp_def</span></code>, <code class="docutils literal notranslate"><span class="pre">pos_def</span></code>, <code class="docutils literal notranslate"><span class="pre">fwhm_def</span></code>
and <code class="docutils literal notranslate"><span class="pre">sigma_def</span></code>. If the FWHM is fixed then you will pass the option
<code class="docutils literal notranslate"><span class="pre">fwhm_def='fixed'</span></code> to the fitting method.</p>
<p>Let’s start with classical free parameters. Once the behaviour of the
parameters is defined you may want to give it a good initial guess
value (especially for the wavenumber) and start fitting. The initial
guess value can be given with the keywords : <code class="docutils literal notranslate"><span class="pre">amp_guess</span></code>,
<code class="docutils literal notranslate"><span class="pre">pos_guess</span></code>, <code class="docutils literal notranslate"><span class="pre">fwhm_guess</span></code> and <code class="docutils literal notranslate"><span class="pre">sigma_guess</span></code>. Only the guess on
the wavenumber is necessary as the others have no real impact on the
result or, in the case of the fwhm, they are known a priori with a
good enough precision. The guess on the wavenumber is so important
that it is not an optional keyword and can be specified with the
<code class="docutils literal notranslate"><span class="pre">lines</span></code> parameter of the fitting method.</p>
<p>The notion of covariation is a little more complex but is certainly
the most useful. two lines can share the same broadening. In this case
the broadening parameter of both lines must be replaced with one
single parameter. You can define the covarying parameter by tagging
them with the same symbol (a string or a number). let’s say you have
three lines (line0, line1, line2), you can group the broadening of
line0 and line2 by passing to the fitting function the keyword
<code class="docutils literal notranslate"><span class="pre">sigma_def=('1','2','1')</span></code>. The real broadening of the lines used to
model the spectrum will be a function of the initial guess value of
the broadening of both lines (0 km/s by default) which will be fixed
during the fit and the covarying value which is a free parameter.</p>
<p>You can also group the lines with the same velocity. In this case, the
base parameter is the wavenumber of the lines and the covarying
parameter is a velocity. To group the lines having the same velocity
(e.g. line0 and line1 in the example) you must pass the keyword
<code class="docutils literal notranslate"><span class="pre">pos_def=('1','1','2')</span></code>. The real wavenumber of the lines used to
model the spectrum will be a function of the lines rest-frame
wavenumber (fixed and passed as an initial guess parameter) and their
group velocity. The velocity may be substantially different from 0 and
the value of the covarying parameter must thus be given to compute a
good enough first initial wavenumber of the lines. The value of the
covarying parameter can be passed with the keywords: <code class="docutils literal notranslate"><span class="pre">amp_cov</span></code>,
<code class="docutils literal notranslate"><span class="pre">pos_cov</span></code>, <code class="docutils literal notranslate"><span class="pre">fwhm_cov</span></code> and <code class="docutils literal notranslate"><span class="pre">sigma_cov</span></code>. If we want to set an
initial velocity of 1500 km/s to the first group of lines and an
initial velocity of 3000 km/s to the second group of lines (which
contains only <code class="docutils literal notranslate"><span class="pre">line2</span></code>) we must give one velocity per group of
velocities in the order of their appearance in the definition
(here <code class="docutils literal notranslate"><span class="pre">pos_def=('1','1','2')</span></code>), i.e. <code class="docutils literal notranslate"><span class="pre">pos_cov=(1500,</span> <span class="pre">3000)</span></code></p>
<p>These examples are related to the definition of the fitting parameters:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="script_example_velocity_parameter_precision.html">How precise must be the input velocity parameter ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="script_example_fit_region.html">Make a fit over an entire region of the field</a></li>
</ul>
</div>
<a class="reference internal image-reference" href="_images/sky-spectrum.png"><img alt="_images/sky-spectrum.png" class="align-center" src="_images/sky-spectrum.png" style="width: 100%;" /></a>
</div>
<div class="section" id="uncertainties">
<h3><a class="toc-backref" href="#id6">Uncertainties</a><a class="headerlink" href="#uncertainties" title="Permalink to this headline">¶</a></h3>
<p>The uncertainties on the returned parameters are based on the
assumption that noise distribution is Gaussian and that there are not
correlated. I have checked those assumptions by analyzing the
distribution of the posterior probability on each parameter with a
Monte-Carlo-Markov-Chain algorithm and found that they are very
reasonable. The uncertainties returned by the MCMC algorithm are also
very close to the one returned by our algorithm (less than a few
percents).</p>
</div>
</div>
<div class="section" id="list-of-available-lines">
<span id="list-lines"></span><h2><a class="toc-backref" href="#id7">List of available lines</a><a class="headerlink" href="#list-of-available-lines" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>NAME</p></th>
<th class="head"><p>Air Wavelength</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[OII]3726</p></td>
<td><p>372.603</p></td>
</tr>
<tr class="row-odd"><td><p>[OII]3729</p></td>
<td><p>372.882</p></td>
</tr>
<tr class="row-even"><td><p>[NeIII]3869</p></td>
<td><p>386.875</p></td>
</tr>
<tr class="row-odd"><td><p>Hepsilon</p></td>
<td><p>397.007</p></td>
</tr>
<tr class="row-even"><td><p>Hdelta</p></td>
<td><p>410.176</p></td>
</tr>
<tr class="row-odd"><td><p>Hgamma</p></td>
<td><p>434.047</p></td>
</tr>
<tr class="row-even"><td><p>[OIII]4363</p></td>
<td><p>436.321</p></td>
</tr>
<tr class="row-odd"><td><p>Hbeta</p></td>
<td><p>486.133</p></td>
</tr>
<tr class="row-even"><td><p>[OIII]4959</p></td>
<td><p>495.891</p></td>
</tr>
<tr class="row-odd"><td><p>[OIII]5007</p></td>
<td><p>500.684</p></td>
</tr>
<tr class="row-even"><td><p>HeI5876</p></td>
<td><p>587.567</p></td>
</tr>
<tr class="row-odd"><td><p>[OI]6300</p></td>
<td><p>630.030</p></td>
</tr>
<tr class="row-even"><td><p>[SIII]6312</p></td>
<td><p>631.21</p></td>
</tr>
<tr class="row-odd"><td><p>[NII]6548</p></td>
<td><p>654.803</p></td>
</tr>
<tr class="row-even"><td><p>Halpha</p></td>
<td><p>656.280</p></td>
</tr>
<tr class="row-odd"><td><p>[NII]6583</p></td>
<td><p>658.341</p></td>
</tr>
<tr class="row-even"><td><p>HeI6678</p></td>
<td><p>667.815</p></td>
</tr>
<tr class="row-odd"><td><p>[SII]6716</p></td>
<td><p>671.647</p></td>
</tr>
<tr class="row-even"><td><p>[SII]6731</p></td>
<td><p>673.085</p></td>
</tr>
<tr class="row-odd"><td><p>HeI7065</p></td>
<td><p>706.528</p></td>
</tr>
<tr class="row-even"><td><p>[ArIII]7136</p></td>
<td><p>713.578</p></td>
</tr>
<tr class="row-odd"><td><p>[OII]7120</p></td>
<td><p>731.965</p></td>
</tr>
<tr class="row-even"><td><p>[OII]7130</p></td>
<td><p>733.016</p></td>
</tr>
<tr class="row-odd"><td><p>[ArIII]7751</p></td>
<td><p>775.112</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="ORCS Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Thomas Martin (thomas.martin.1@ulaval.ca)

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>